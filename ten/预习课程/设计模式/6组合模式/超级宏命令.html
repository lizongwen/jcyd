<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Document</title>
</head>

<body>
	<button id="button">按我</button>
	<script>
		var macroCommand = function () {
			return {
				commandList: [],
				add: function (command) {
					this.commandList.push(command);
				},
				execute: function () {
					this.commandList.forEach((item) => {
						item.execute();
					});
				}
			}
		}

		//通用基础命令
		var openAc = {
			execute: function () {
				console.log('打开空调');
			}
		}


		//开电视
		var openTv = {
			execute: function () {
				console.log('打开电视');
			}
		}
		//开音响
		var openSound = {
			execute: function () {
				console.log("打开音响")
			}
		}

		//关门
		var closeDoor = {
			execute: function () {
				console.log("关门")
			}
		}
		//开电脑
		var openPc = {
			execute: function () {
				console.log("开电脑")
			}
		}
		//登录QQ
		var openQQ = {
			execute: function () {
				console.log("登录QQ")
			}
		}

		var macroCommand1 = macroCommand();
		macroCommand1.add(openTv)
		macroCommand1.add(openSound)
		var macroCommand2 = macroCommand();
		macroCommand2.add(closeDoor)
		macroCommand2.add(openPc)
		macroCommand2.add(openQQ)
		var macroCommand = macroCommand();
		macroCommand.add(openAc)
		macroCommand.add(macroCommand1)
		macroCommand.add(macroCommand2)
		console.log(macroCommand)

		var setCommand = (function (command) {
			document.getElementById('button').onclick = function () {
				command.execute();
			}
		})(macroCommand)

	</script>
</body>

</html>